# 监听触摸事件

![image-20211006220526291](%E7%AC%94%E8%AE%B0.assets/image-20211006220526291.png)

![image-20211006220730355](%E7%AC%94%E8%AE%B0.assets/image-20211006220730355.png)

# 手势识别

1、创建手势对象

2、对某个view添加手势

3、实现手势的方法

# 旋转

```objective-c
    self.imageView.transform = CGAffineTransformRotate(self.imageView.transform, sender.rotation);
```

![image-20211006231806133](%E7%AC%94%E8%AE%B0.assets/image-20211006231806133.png)

在自身基础上累加

改进：每次增减： 夹脚度数

```objective-c
    self.imageView.transform = CGAffineTransformRotate(self.imageView.transform, sender.rotation);
    //为了防止叠加 旋转度数
    sender.rotation = 0;
```

# 手势的代理

默认手势一次只能使用一种

为了解决手势冲突

UIGestureRecognizer里面有delegate

- 如果有两个手势需要同时使用（比如：旋转，缩合

那么只需要给一个手势 设置代理

```objective-c
    rotation.delegate = self;
```

# CALayer

![image-20211007225222840](%E7%AC%94%E8%AE%B0.assets/image-20211007225222840.png)

![image-20211007225447438](%E7%AC%94%E8%AE%B0.assets/image-20211007225447438.png)

- 所以在view里面CGRect绘制里面 获取的上下文就是 CALayer类型的

![image-20211007230100243](%E7%AC%94%E8%AE%B0.assets/image-20211007230100243.png)

 ![image-20211007230424854](%E7%AC%94%E8%AE%B0.assets/image-20211007230424854.png)

- imageView也有layer

#   根layer没有隐式动画

：控制器下面有layer属性 

![image-20211008143720108](%E7%AC%94%E8%AE%B0.assets/image-20211008143720108.png)

# 禁用隐式动画

```objective-c
//禁用隐式动画
    //开启事务
    [CATransaction begin];
//    //禁用隐式动画
    [CATransaction setDisableActions:YES];
    self.layer.position = p;
//    //提交事务
    [CATransaction commit];
```



# layer的3d变换

```objective-c
		//旋转
    //参数0，不在那个坐标轴上面旋转
    self.layer.transform = CATransform3DRotate(self.layer.transform, M_PI_4, 1, 1, 0);
    
    //缩放(z无效，压薄，压厚
    self.layer.transform = CATransform3DScale(self.layer.transform, 1, 1.5, 0.5);
    
    //平移（z无效,离屏幕远近
    self.layer.transform = CATransform3DTranslate(self.layer.transform, 10, 20, 0);
```

# 锚点/定位点

![image-20211008153027768](%E7%AC%94%E8%AE%B0.assets/image-20211008153027768.png)

![image-20211008153143069](%E7%AC%94%E8%AE%B0.assets/image-20211008153143069.png)

![image-20211008153507833](%E7%AC%94%E8%AE%B0.assets/image-20211008153507833.png)

![image-20211008153528336](%E7%AC%94%E8%AE%B0.assets/image-20211008153528336.png)

![image-20211008153546656](%E7%AC%94%E8%AE%B0.assets/image-20211008153546656.png)

要让anchorPoint的值等于position的值

# 表盘练习

![image-20211008160303803](%E7%AC%94%E8%AE%B0.assets/image-20211008160303803.png)

毫秒造成的误差

# CADisplayLink

![image-20211008160439243](%E7%AC%94%E8%AE%B0.assets/image-20211008160439243.png)

```objective-c
  //换 显示连接
    CADisplayLink *link = [CADisplayLink displayLinkWithTarget:self selector:@selector(timeChange)];
    //添加到死循环里
    [link addToRunLoop:[NSRunLoop mainRunLoop] forMode:NSDefaultRunLoopMode];
```

# 核心动画

![image-20211008223707413](%E7%AC%94%E8%AE%B0.assets/image-20211008223707413.png)

![image-20211008162035346](%E7%AC%94%E8%AE%B0.assets/image-20211008162035346.png)

![image-20211008162611180](%E7%AC%94%E8%AE%B0.assets/image-20211008162611180.png)

- keyFrameAnimation关键帧动画

animationGroup:管理其他动画（多个动画同时执行

CAMediaTiming 一个协议

# 核心动画-基本动画

![image-20211008163211962](%E7%AC%94%E8%AE%B0.assets/image-20211008163211962.png)

 ![image-20211008164619754](%E7%AC%94%E8%AE%B0.assets/image-20211008164619754.png)

# 核心动画-关键帧动画

确定两个关键帧：之间的移动系统会自动搞定，即补间动画

# 核心动画-组动画

# 核心动画-转场动画

![image-20211008191822849](%E7%AC%94%E8%AE%B0.assets/image-20211008191822849.png)

# 小画板

渲染，设置颜色之类 必须在drawRect里面，其他在哪里都行

不同粗细 之间不受打扰：path数组

