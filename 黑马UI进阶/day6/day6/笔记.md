# 矩阵操作-仿射变换

![image-20211004213811981](%E7%AC%94%E8%AE%B0.assets/image-20211004213811981.png)

- 对上下文进行 旋转缩放平移

- 拿到上下文之后，就可以旋转缩放平移(在路径放在上下文之前)

# 上下文栈

- 每次渲染的时候，上下文还在，只是把上下文上的路径移动到屏幕上

- 上下文栈保存 备份的 绘图信息

- ![image-20211005094055931](%E7%AC%94%E8%AE%B0.assets/image-20211005094055931.png)
- 恢复状态的语句放在渲染之前就行

![image-20211005100603367](%E7%AC%94%E8%AE%B0.assets/image-20211005100603367.png)

# 内存管理

上架之前做一次分析

![image-20211005100752232](%E7%AC%94%E8%AE%B0.assets/image-20211005100752232.png)

![image-20211005101617480](%E7%AC%94%E8%AE%B0.assets/image-20211005101617480.png)

![image-20211005101636256](%E7%AC%94%E8%AE%B0.assets/image-20211005101636256.png)

# 绘制文字

![image-20211005101947607](%E7%AC%94%E8%AE%B0.assets/image-20211005101947607.png)

![image-20211005103206488](%E7%AC%94%E8%AE%B0.assets/image-20211005103206488.png)

记一个，之后遇到attributes写字典可以迁移，基本上都是NSFontArributeName定义头文件里面的相关key

# 模拟imageView

 ![image-20211005111413386](%E7%AC%94%E8%AE%B0.assets/image-20211005111413386.png)

- initWithimage有Frame，默认大小就是图片大小

init没有Frame

# 裁剪上下文的渲染区域

![image-20211005170923502](%E7%AC%94%E8%AE%B0.assets/image-20211005170923502.png)

![image-20211005170940269](%E7%AC%94%E8%AE%B0.assets/image-20211005170940269.png)

裁剪就是变成透明的而已

# 图片类型的图形上下文

![image-20211005172353661](%E7%AC%94%E8%AE%B0.assets/image-20211005172353661.png)

画出一个image对象

把它放到UIImageView 

# 将图片保存到沙盒

![image-20211005174511100](%E7%AC%94%E8%AE%B0.assets/image-20211005174511100.png)

# 获取裁剪过后的图片

![image-20211005181311558](%E7%AC%94%E8%AE%B0.assets/image-20211005181311558.png)

# 例子

![image-20211005221704651](%E7%AC%94%E8%AE%B0.assets/image-20211005221704651.png)

# 水印

![image-20211005231143150](%E7%AC%94%E8%AE%B0.assets/image-20211005231143150.png)

- 图片上下文

![image-20211005231225231](%E7%AC%94%E8%AE%B0.assets/image-20211005231225231.png)

# 屏幕截图

![image-20211005232819301](%E7%AC%94%E8%AE%B0.assets/image-20211005232819301.png)

截取某个view
