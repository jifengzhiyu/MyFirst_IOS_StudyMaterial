# UIWindow

UIWindow是最顶层的界面内容，我们使用UIWindow和UIView来呈现界面。UIWindow并不包含任何默认的内容，但是它被当作UIView的容器，用于放置应用中所有的UIView。

```objective-c
@interface UIWindow : UIView
```

作为应用程序的主窗口

- 按道理位于AppDelegate.h文件中

```objective-c
@property(strong, nonatomic)UIWindow *window;
//在main.m里面，把程序代理对象的window实例化，作为应用程序的keyWindow
```

# 应用程序启动流程

- 1、应用程序的入口main.m文件

![image-20210928152725851](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210928152725851.png)

```objective-c
int main(int argc, char * argv[]) {
    NSString * appDelegateClassName;
    @autoreleasepool {
        // Setup code that might create autoreleased objects goes here.
        appDelegateClassName = NSStringFromClass([AppDelegate class]);
    }
    return UIApplicationMain(argc, argv, nil, appDelegateClassName);
}
```

  UIApplicationMain:
死循环，保证应用程序不会被销毁

Returns

Even though an n ; return type is specified, this function never returns. When users exits an iOS app by pressing the Home button, the application moves to the background.

```objective-c
int argc
  //一堆值的数量
  
 char * argv[]
  //agrc对应的值的列表
  
  nil
The name of the UIApplication class or subclass. If you specify nil, UIApplication is assumed.
  //这里的nil，相当于@"UIApplication"
 //创建一个应用程序对象
```

```objective-c
appDelegateClassName = NSStringFromClass([AppDelegate class]);
//根据AppDelegate类，返回一个字符串
//根据这个字符串，创建一个appDelegate对象，并作为应用程序的代理
```

加载带箭头的控制器

![image-20210929144646053](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210929144646053.png)

```objective-c
/*
1、找到main.m的main函数（作为应用程序的入口
里面有一个自动释放池，UIApplicationMain方法 来保证程序 运行循环
2、参数nil：创建UIApplication对象
3、创建并设置应用程序的代理对象，AppDelegate，SceneDelegate

Appdelegate的作用是只处理 App 生命周期, 而UI的生命周期将全权由新增的SceneDelegate来处理. 

将SceneDelegate里面的window属性作为应用程序的主窗口
加载配置文件中的（默认main.stroyboard）stroyboard 的控制器
4、启动完毕通知代理对象 应用加载完毕
*/
```





# 内存警告

在AppDelegate.m中

```objective-c
- (void)applicationDidReceiveMemoryWarning:(UIApplication *)application{
    NSLog(@"内存警告");
}
```

![image-20210928173856806](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210928173856806.png)

会调用该方法

![image-20210928173924242](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210928173924242.png)

# 通过代码加载自定义控制器

https://blog.csdn.net/shifang07/article/details/104682190

 iOS13之前，Appdelegate的作用是全权处理App生命周期和UI生命周期； iOS13之后，Appdelegate的作用是只处理 App 生命周期, 而UI的生命周期将全权由新增的SceneDelegate来处理. 

1、删除main.stroyboard   viewController.h .m

2、配置文件中默认加载storyboard文件名称删除

- 删除两组键值
- 查看删除 main interface

![image-20210928223332764](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210928223332764.png)

![image-20210928223439957](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210928223439957.png)

3、加载自定义控制器的操作

![image-20210928194646803](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210928194646803.png)

b.创建一个类，继承控制器类

![image-20210928195108272](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210928195108272.png)

![image-20210928224603068](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210928224603068.png)

# 控制器的懒加载

![image-20210929082754151](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210929082754151.png)

# 手动创建UIWindw

![image-20210929083208709](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210929083208709.png)

![image-20210929083231657](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210929083231657.png)

# 加载控制器的三种方式



![image-20210929083838813](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210929083838813.png)

## 通过代码加载自定义控制器

删除

![image-20210929093401327](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210929093401327.png)



## 通过stroryboard

1、删除

![image-20210929084057072](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210929084057072.png)

2、创建

![image-20210929084738685](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210929084738685.png)

3、往里面拖一个控制器(UIViewController)

4、设为初始化

![image-20210929084913308](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210929084913308.png)

- //如果一个storyboard里面有多个控制器，加载实例化指定的控制器

    //使用idenfifier指定

![image-20210929092747941](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210929092747941.png)

## 通过xib

![image-20210929093152679](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210929093152679.png)

1、删除

![image-20210929084057072](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210929084057072.png)

2、新建

![image-20210929093252566](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210929093252566.png)

![image-20210929093536930](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210929093536930.png)

3、关联xib与自定义控制器

![image-20210929094714527](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210929094714527.png)

![image-20210929094531867](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210929094531867.png)

![image-20210929094645233](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210929094645233.png)

# 多控制器的管理

## 多控制器

![image-20210929150240424](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210929150240424.png)

导航控制器：跳转

父控制器是子控制器的容器

## UINavigationController

![image-20210929151131044](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210929151131044.png)

- 从右显示到左 进入:push

从左显示到右 返回 :pop

- xcode 根控制器是什么?

https://zhidao.baidu.com/question/582676178021361805.html?fr=iks&word=xcode+%B8%F9%BF%D8%D6%C6%C6%F7%CA%C7%CA%B2%C3%B4&ie=gbk

RootViewController 根视图控制器。搭积木玩过吧，类似最下面一块积木。其他视图控制器都是在这个rootviewcontroller的基础上push。最下面只能放一块积木，至于这个积木是什么颜色，你需要自己定制，这就是下面的mainViewController了。
MainViewController 是你自己定制的一个控制器，你可以把这个视图控制器设置成为你的rootViewController（比如下面一块积木我可以放蓝色也可以放红色，但他们都是rootViewController）。

```
你可以把window的rootViewController属性 看成一个UIViewController 的容器，你需要把自定义的UIViewController 对象放进去。

比如 rootViewController 是你手里的杯子，而自己定制的MainViewController就是水或者咖啡或者可乐。
```

### 导航栏/条

![image-20210929154912927](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210929154912927.png)

- 导航控制器可以帮助管理其他多个控制器
- UINavigationController是一个控制器，用户的交互行为则主要依靠导航条UINavigationBar完成。

### 导航控制器管理其他多个控制器

![image-20210929155845486](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210929155845486.png)

三个同时创建就会把改连的连了

![image-20210929161218530](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210929161218530.png)

- 应用启动之后的控制器，就是 导航控制器的 根控制器

![image-20210929162756498](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210929162756498.png)

![image-20210929163238278](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210929163238278.png)

![image-20210929164835447](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210929164835447.png)

### 导航控制器的栈

- push控制器进入栈（导航控制器的栈），创建该控制器的view,并显示
- pop退出栈（销毁

- 导航控制器的栈就和坑一样pop（先进后出，后进先出

![image-20210929165318474](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210929165318474.png)

![image-20210929165652643](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210929165652643.png)

![image-20210929165139394](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210929165139394.png)

- 一直push，一直把view往后显示（屏幕显示最新的view

![image-20210929165757341](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210929165757341.png)

- 出栈才销毁

![image-20210929165833935](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210929165833935.png)

![image-20210929170220698](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210929170220698.png)

### 通过storyboard使用导航控制器

1、删除main.storyboard的控制器  

2、删除![image-20210929172631642](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210929172631642.png)

3、在main.storyboard里面拖导航控制器

4、删除与导航控制器关联的![image-20210929172805879](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210929172805879.png)

5、![image-20210929172848564](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210929172848564.png)

6、main.storyboard里面拽viewController。拉线设置为根控制器

7、创建按钮，背景色

8、control红色控制器 拖到绿色控制器 选show

9、自定义控制器，继承UIController，和main.stroyboard里面创建的相关联

![image-20210929195742291](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210929195742291.png)

10、拖线，代码从蓝色 三种方式跳转

## navigation item

![image-20210929201635310](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210929201635310.png)

![image-20210929202007916](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210929202007916.png)

可以更改样式

![image-20210929224702705](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210929224702705.png)

可以设计标题

![image-20210929225103262](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210929225103262.png)

在前一个控制器设置返回文字

点击自动返回

## 设置导航栏内容

导航栏navigationItem

- UIBarButtonItem: 只能放在UIToolBar或导航栏navigationItem里面

- 使用代码更改![image-20210929234722293](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210929234722293.png)

- ![image-20210929235330949](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210929235330949.png)

# 控制器view的生命周期

![image-20210930081728673](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210930081728673.png)

  ![image-20210930082240319](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210930082240319.png)

![image-20210930082259845](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210930082259845.png)

![image-20210930082320103](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210930082320103.png)

 一个个view控制器进入导航控制器的栈

一个个控制器都是按照push顺序一个个通过指针链接

如果指定POP的话，之前相隔的控制器都会被一起清除，因为控制器通过指针相连，图中先废弃绿色再废弃蓝色控制器

# 通过syroyvoard使用导航控制器的传值

![image-20210930083451929](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210930083451929.png)

# stroyboard segue

![image-20210930084756261](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210930084756261.png)

里面有：
![image-20210930084854307](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20210930084854307.png)

# 导航控制器、导航条、导航项、控制器的关系

原文链接：https://blog.csdn.net/u010958446/article/details/54604071

# ![image-20211002092924831](%E5%A4%9A%E6%8E%A7%E5%88%B6%E5%99%A8%E7%AE%A1%E7%90%86.assets/image-20211002092924831.png)

UINavigationController：容器，使用栈的形式存储和管理多个UIViewController，每一个UIViewcontroller就是一个层级页面，导航控制器每次只显示其存储的位于最上面的UIViewcontroller；

UINavigationBar：容器，位于屏幕顶端的控件，与UINavigationController一对一对应**（UINavigationController上面才是UINavigationBar)**，它继承UIView，使用栈的形式存储和管理多个UINavigationItem,导航条上每次只显示其存储的位于最上面的UINavigationItem；

UINavigationItem(**UINavigationController管理的UIViewController上面的才是UINavigationItem**）：容器，由标题，左边N个按钮，右边N个按钮三部分组成，标题是一个位于导航条中间的UIView,每个按钮都是一个**UIBarButtonItem**控件；

UIViewController：控制器，管理显示视图和模型，被存储在UINavigationController中，与UINavigationItem一对一对应

- UINavigationController是一个控制器，用户的交互行为则主要依靠导航条UINavigationBar完成。

