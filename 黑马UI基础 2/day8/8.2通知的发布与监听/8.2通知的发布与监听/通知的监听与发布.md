# 监听系统事件

- 通过通知监听事件

- 监听键盘的事件，在键盘弹出的时候，自动往上平移到最后的消息

![image-20210918213342928](file:///Users/kaixin/Documents/my_github/UI/%E9%BB%91%E9%A9%ACUI%E5%9F%BA%E7%A1%80/day8/day8/%E5%BE%AE%E4%BF%A1.assets/image-20210918213342928.png?lastModify=1632018825)

- 发布，监听通知，移除通知：使用NSNotificationCenter对象来实现

- 每次发送的一条通知，就是用一个NSNotification对象（对一个通知的封装）

![image-20210918213958968](file:///Users/kaixin/Documents/my_github/UI/%E9%BB%91%E9%A9%ACUI%E5%9F%BA%E7%A1%80/day8/day8/%E5%BE%AE%E4%BF%A1.assets/image-20210918213958968.png?lastModify=1632018825)

- 理解：

广播：A对象发送通知，不管谁接收通知

- A对象用NSNotificationCenter发布通知

B对象来监听，通过NSNotificationCenter对象 监听

![image-20210918214734234](file:///Users/kaixin/Documents/my_github/UI/%E9%BB%91%E9%A9%ACUI%E5%9F%BA%E7%A1%80/day8/day8/%E5%BE%AE%E4%BF%A1.assets/image-20210918214734234.png?lastModify=1632018825)

这三个方法都一样

**先监听，再发布通知**

因为：要求 只要通知一发布，就可以被监听到，（m1）方法就可以立刻被执行

![image-20210918221838039](file:///Users/kaixin/Documents/my_github/UI/%E9%BB%91%E9%A9%ACUI%E5%9F%BA%E7%A1%80/day8/day8/%E5%BE%AE%E4%BF%A1.assets/image-20210918221838039.png?lastModify=1632018825)

![image-20210918222112195](file:///Users/kaixin/Documents/my_github/UI/%E9%BB%91%E9%A9%ACUI%E5%9F%BA%E7%A1%80/day8/day8/%E5%BE%AE%E4%BF%A1.assets/image-20210918222112195.png?lastModify=1632018825)

- 移除通知：

**哪个对象监听通知，就让哪个对象的dealloc移除通知**

为了避免野指针错误：

先回收lisener1，如果之后再有通知发布，就会调用m1方法 即出现僵尸对象错误

所以需要释放：移除通知： 在lisener1被回收以前，先把它和notification的关系解除

![image-20210918223115775](file:///Users/kaixin/Documents/my_github/UI/%E9%BB%91%E9%A9%ACUI%E5%9F%BA%E7%A1%80/day8/day8/%E5%BE%AE%E4%BF%A1.assets/image-20210918223115775.png?lastModify=1632018825)

- 通知的发布和接受至少要三个对象：

发布者，监听者，NSNotificationCenter对象

- 获取通知内容：

会自动调用NSNotification对象

- ![image-20210918225328477](file:///Users/kaixin/Documents/my_github/UI/%E9%BB%91%E9%A9%ACUI%E5%9F%BA%E7%A1%80/day8/day8/%E5%BE%AE%E4%BF%A1.assets/image-20210918225328477.png?lastModify=1632018825)

# 监听所有通知

![image-20210918224621039](file:///Users/kaixin/Documents/my_github/UI/%E9%BB%91%E9%A9%ACUI%E5%9F%BA%E7%A1%80/day8/day8/%E5%BE%AE%E4%BF%A1.assets/image-20210918224621039.png?lastModify=1632018825)
