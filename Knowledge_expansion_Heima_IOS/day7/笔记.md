# 换肤

\1. 换肤使用的场景: 换皮肤功能 / 日间夜间模式

\2. 换什么 : 背景图片图标 / 文字颜色 / 背景颜色

\3. 换肤其实是程序设计思想的一种具体实现.

## 换资源的配置

- 查看app路径

```objective-c
po [[NSBundle mainBundle] bundlePath]
```

![image-20220103111301151](%E7%AC%94%E8%AE%B0.assets/image-20220103111301151.png)

一. 换资源的配置

\1. 一旦文件重名（同一个目录下重名文件), 将来打包时就会丢失文件

\2. 确保重名文件, 选中的是蓝色文件夹, 打包后, 就会有全部的文件了

\3. 修改文件的路径(原路径失效, 测试时最好删除程序清空缓存再试)

## 抽取封装

抽取的方法(场景分析):

  2.1 抽取父类, 对于界面内容多变的情况不太适用

  2.2 工具类, 对于界面内容多变的情况非常适用

  2.3 分类, 对于某个系统的某个控件扩充方法时使用

- 自己的一个小问题

Xcode 中放置图片的位置，Assets.xcassets 和直接放在源文件目录中：

一般图片这样命名：
![image-20220103200605541](%E7%AC%94%E8%AE%B0.assets/image-20220103200605541.png)

也一般就直接放到Assets.xcassets里面

如果这样命名：

![image-20220103200706418](%E7%AC%94%E8%AE%B0.assets/image-20220103200706418.png)

![image-20220103200714070](%E7%AC%94%E8%AE%B0.assets/image-20220103200714070.png)

就要放在boundle里面，因为 图片只支持[UIImage imageNamed]的方式实例化，但是不能从Bundle中加载。［使用[NSBundle MainBundle] pathForResources 拿不到 images.xcassets里面图片的路径］

## 工具类的性能优化

\1. 注意偏好设置的读取是耗性能的(频繁读取硬盘), 所以应该保证只去读一次.

\2. 如何保证代码只加载一次:

  2.1 多线程 --> dispatchOnce

  2.2 只调用一次的方法

/** load方法, 只要头文件参与了编译就会调用此方法 */

/** initialize, 类的实例创建时, 才会调用此方法*/

## TabBar控制器的处理

\1. 如果添加了TabBar控制器, 那么如果视图没有销毁, 在viewDidLoad皮肤只会加载一次, 不会随着设置的更新而更新

\2. 此时需要放在在视图出现之前, 重新加载皮肤

**//viewWillAppear: 视图将要显示的时候会调用的方法**

# 内购

![image-20220104093105729](%E7%AC%94%E8%AE%B0.assets/image-20220104093105729.png)

