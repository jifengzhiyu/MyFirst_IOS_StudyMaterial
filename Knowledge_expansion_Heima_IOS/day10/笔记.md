# 传感器

加速计:检测力在某个方向上有作用(摇一摇)
陀螺仪:检测转动的角速度(绕着Y轴旋转,玩手机赛车游戏)

![image-20220108115306362](%E7%AC%94%E8%AE%B0.assets/image-20220108115306362.png)

# 距离传感器

```objective-c
- (void)viewDidLoad {
    [super viewDidLoad];
    
    //1. 开启距离传感器
    [UIDevice currentDevice].proximityMonitoringEnabled = YES;
    
    //2. 注册通知
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(proximityStateDidChangeNotification) name:UIDeviceProximityStateDidChangeNotification object:nil];
}

#pragma mark 通知的方法
- (void)proximityStateDidChangeNotification {
    //3. 获取通知的值
    if ([UIDevice currentDevice].proximityState) {
        NSLog(@"有逗比靠近");
    } else {
        NSLog(@"逗比被吓跑了");
    }
}
```

# 加速计

三个demo例子的传感器都有pull,push两种用法

# 蓝牙

![image-20220109105105402](%E7%AC%94%E8%AE%B0.assets/image-20220109105105402.png)

## Core Bluetooth

**智能家居**

- CoreBluetooth.framework（时下热门）
  可用于第三方蓝牙设备交互，必须要支持蓝牙4.0
  硬件至少是4s，系统至少是iOS6
  蓝牙4.0以低功耗著称，一般也叫BLE（Bluetooth Low Energy）
  目前应用比较多的案例：运动手坏、嵌入式设备、智能家居 

- Core Bluetooth测试比较麻烦，正常情况下，得至少有2台真实的蓝牙4.0设备

  如何让iOS模拟器也能测试蓝牙4.0程序？
  买一个CSR蓝牙4.0 USB适配器，插在Mac上
  在终端输入sudo nvram bluetoothHostControllerSwitchBehavior="never"
  重启Mac
  用Xcode 4.6调试代码，将程序跑在iOS 6.1的模拟器上
  （苹果把iOS 7.0模拟器对BLE的支持移除掉了）

  Core Bluetooth的使用场景
  运动手环、智能家居、嵌入式设备等等（金融刷卡器、心电测量器）

![image-20220109113638954](%E7%AC%94%E8%AE%B0.assets/image-20220109113638954.png)

- 每个蓝牙4.0设备都是通过服务（Service）和特征（Characteristic）来展示自己的
  一个设备必然包含一个或多个服务，每个服务下面又包含若干个特征

  特征是与外界交互的最小单位
  比如说，一台蓝牙4.0设备，用特征A来描述自己的出厂信息，用特征B来收发数据

  服务和特征都是用UUID来唯一标识的，通过UUID就能区别不同的服务和特征

  设备里面各个服务(service)和特征(characteristic)的功能，均由蓝牙设备硬件厂商提供，比如哪些是用来交互(读写)，哪些可获取模块信息(只读)等

- 步骤：

建立中心设备

扫描外设（Discover Peripheral）

连接外设(Connect Peripheral)

扫描外设中的服务和特征(Discover Services And Characteristics)

利用特征与外设做数据交互(Explore And Interact)

断开连接(Disconnect)

 
